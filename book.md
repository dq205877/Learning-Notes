# Java多线程编程核心技术

**进程**：是操作系统结构的基础;是一次程序的执行;是一个程序及其数据在处理机上顺序执行时所发生的活动;是程序在一个数据集合上运行的过程，它是系统进行资源分配和调度的一个独立单位。

**线程**：可理解成是在进程中独立运行的子任务。

**多线程是异步的。**非顺序执行，线程调用的时机是随机的。

实现多线程主要两种：继承Thread类/实现Runable

**实例变量与线程安全**

实例变量 

①不共享数据的情况

线程内变量各线程自己使用

②共享数据的情况

一个公用线程做为参数实例多个线程

**留意i--与System.out.pringln()的异常**（两个原子操作合起来都不是原子操作，更何况i--不是）

currentThread()方法 可返回代码段被哪个线程调用的信息

isAlive()方法  判断当前线程是否处于活动状态

sleep()方法  指定毫秒数让“当前正执行线程”休眠 **this.currentThread()**返回的线程

getId()方法  作用是取得线程的唯一标识。（如两相同名的线程）

**停止线程**

①interrupt()并非真的停止线程，只是给当前线程作了停止的标记。

②this.interrupted() 当前线程是否已中断 执行后具有将状态标志置清除为载false的功能。（第一次中断后，第二次中断j时调用检验完中断状态前不一定是false）

this.isInterrupted() 线程是否已中断

③异常  InterruptedException  中断后下面有代码会继续执行

④先sleep再停止，sleep前后代码都执行再进入异常捕获 清除停止状态值 为false

先停止再sleep,sleep后代码不执行进入异常捕获

⑤stop()暴力停止

⑥stop()与java.lang.ThreadDeath异常  stop()无须显式捕获该异常   stop()可能使一些清理性的工作得不到完成  还会解锁锁定对象，导致不同步

⑦stop()释放锁造成数据不一致

⑧推荐用抛异常方式停止，能向上传播。 interrupt()与return结束也能实现 线程停止。